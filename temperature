#!/bin/bash

TCXC="PECI_CPU"
TCXc="PECI_CPU1"
TC0P="CPU_1_PROXIMITY"
TC0H="CPU_1_HEATSINK"
TC0D="CPU_1_PACKAGE"
TC0E="CPU_1"
TC0F="CPU_11"
TC1C="CPU_CORE_1"
TC2C="CPU_CORE_2"
TC3C="CPU_CORE_3"
TC4C="CPU_CORE_4"
TC5C="CPU_CORE_5"
TC6C="CPU_CORE_6"
TC7C="CPU_CORE_7"
TC8C="CPU_CORE_8"
TCAH="CPU_1_HEATSINK_ALT"
TCAD="CPU_1_PACKAGE_ALT"
TC1P="CPU_2_PROXIMITY"
TC1H="CPU_2_HEATSINK"
TC1D="CPU_2_PACKAGE"
TC1E="CPU_2"
TC1F="CPU_21"
TCBH="CPU_2_HEATSINK_ALT"
TCBD="CPU_2_PACKAGE_ALT"
TCSC="PECI_SA"
TCSc="PECI_SA1"
TCSA="PECI_SA2"
TCGC="PECI_GPU"
TCGc="PECI_GPU1"
TG0P="GPU_PROXIMITY"
TG0D="GPU_DIE"
TG1D="GPU_DIE1"
TG0H="GPU_HEATSINK"
TG1H="GPU_HEATSINK1"
Ts0S="MEMORY_PROXIMITY"
TM0P="MEM_BANK_A1"
TM1P="MEM_BANK_A2"
TM8P="MEM_BANK_B1"
TM9P="MEM_BANK_B2"
TM0S="MEM_MODULE_A1"
TM1S="MEM_MODULE_A2"
TM8S="MEM_MODULE_B1"
TM9S="MEM_MODULE_B2"
TN0D="NORTHBRIDGE_DIE"
TN0P="NORTHBRIDGE_PROXIMITY_1"
TN1P="NORTHBRIDGE_PROXIMITY_2"
TN0C="MCH_DIE"
TN0H="MCH_HEATSINK"
TP0D="PCH_DIE"
TPCD="PCH_DIE1"
TP0P="PCH_PROXIMITY"
TA0P="AIRFLOW_1"
TA1P="AIRFLOW_2"
Th0H="HEATPIPE_1"
Th1H="HEATPIPE_2"
Th2H="HEATPIPE_3"
Tm0P="MAINBOARD_PROXIMITY"
Tp0P="POWERBOARD_PROXIMITY"
Ts0P="PALM_REST"
Tb0P="BLC_PROXIMITY"
TL0P="LCD_PROXIMITY"
TW0P="AIRPORT_PROXIMITY"
TH0P="HDD_BAY_1"
TH1P="HDD_BAY_2"
TH2P="HDD_BAY_3"
TH3P="HDD_BAY_4"
TO0P="OPTICAL_DRIVE"
TB0T="BATTERY_TS_MAX"
TB1T="BATTERY_1"
TB2T="BATTERY_2"
TB3T="BATTERY"
Tp0P="POWER_SUPPLY_1"
Tp0C="POWER_SUPPLY_1_ALT"
Tp1P="POWER_SUPPLY_2"
Tp1C="POWER_SUPPLY_2_ALT"
Tp2P="POWER_SUPPLY_3"
Tp3P="POWER_SUPPLY_4"
Tp4P="POWER_SUPPLY_5"
Tp5P="POWER_SUPPLY_6"
TS0C="EXPANSION_SLOTS"
TA0S="PCI_SLOT_1_POS_1"
TA1S="PCI_SLOT_1_POS_2"
TA2S="PCI_SLOT_2_POS_1"
TA3S="PCI_SLOT_2_POS_2"

items="TC0P TC0H TG0H TA0P Tm0P TL0P TO0P Tp1P"
function sedArg()
{
  sedArg=()
  for item in $@
  do
    name=`eval echo '$'{$item}`
    printf '%s %s ' '-e' "s/${item}/${name}:/g"
  done
}

if [ -L "$0" ];then
  script=`readlink $0`
else
  script=$0
fi

SCRIPT_DIR=$(cd $(dirname $script);pwd)

if [ ! -e "${SCRIPT_DIR}/osx-cpu-temp" ];then
  cd ${SCRIPT_DIR} && make > /dev/null 2>&1
fi

COMMAND="${SCRIPT_DIR}/osx-cpu-temp"

${COMMAND} ${items} | eval sed `sedArg ${items[@]}` | sed -e 's/_/ /g'
